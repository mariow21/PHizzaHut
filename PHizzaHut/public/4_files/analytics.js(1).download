this.Chicory=this.Chicory||{},this.Chicory.analytics=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://prod-cdn.chicoryapp.com/chicory-analytics/",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(1)),o=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var u=("e.chicoryapp.com".includes("localhost")?"http://":"https://")+"e.chicoryapp.com",a=new Date((new Date).toUTCString()).getTime(),s=["view_button","click_button","click_campaign"],l=["view_button","click_button","view_campaign","click_campaign","click_print_button","choose_grocer","click_send_to_grocer","deactivate_ingredient","activate_ingredient","view_cart","view_product_alternates","choose_product_alternate","close_cart","c2c_login_prompt","c2c_login_send","c2c_login_successful","c2c_login_failed","partner_link","choose_grocer_location","ra_grocer_redirect","ctc_login_attempted","ra_login_attempted","buy_button_click","click_to_cart","sslp_page_view","sslp_choose_retailer","sslp_choose_location","sslp_retailer_scroll","sslp_retailer_redirect"],f=["view_button","click_button","choose_grocer","choose_grocer_location","ra_grocer_redirect","ra_login_attempted","close_cart"],d=["sslp_page_view","ra_choose_grocer","ra_choose_location","sslp_choose_retailer","sslp_choose_location","sslp_retailer_redirect","sslp_retailer_scroll","ra_grocer_redirect","click_to_cart"],h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings={},this.device={},this.session={},this.funnel={},this.queue=[],this.$iframe=null,this.ready=!1,this.listen=i.default.listen,this.send_event=i.default.send}return r(e,[{key:"deactivate",value:function(){}},{key:"activate",value:function(e){return this.load(e).then(this.run.bind(this)).catch(i.default.done),this}},{key:"load",value:function(e){var t=this;return new Promise(function(n){if(this.settings=e,this.setSessionProperties({is_mobile:e.is_mobile}),this.setFunnelProperties({recipe_id:e.recipe?e.recipe.id:null}),this.ready)return n();var r=document.createElement("template");r.innerHTML='<iframe id="chicory-analytics" src="'+u+"/api/init/"+(e.new_funnel?"#funnel":"")+'"  style="display: none;width: 0px;height: 0px;">',this.$iframe=r.content.firstChild,document.body.appendChild(this.$iframe),this.wait(this.$iframe,"init").then(function(e){this.device=e.device,this.session=e.session,this.funnel=e.funnel,this.ready=!0,i.default.each(this.queue,function(e,t){var n=this[t.method],r=t.args,o=t.promise;n.apply(this,r).then(function(e){o.resolve(e)}).catch(i.default.done),delete this.queue[e]}.bind(this)),i.default.each(l,function(e,t){i.default.listen(t,function(e){this.logEvent(t,e),s.includes(t)&&this.broadcastEvent(t,e)}.bind(this))}.bind(this)),i.default.listen("load_cookie",function(e){this.syncCookie(e)}.bind(this)),i.default.listen("getEvent",function(e){var n=t.getEvent(e.name,e);i.default.send("getEvent",n)}),(0,i.default)(".ERSPrintBtn, .wpurp-recipe-print-button, .zlrecipe-print-link, .yrecipe-print-link .blog-yumprint-print").on("click",function(){i.default.send("click_print_button")}),n()}.bind(this)).catch(i.default.done)}.bind(this))}},{key:"run",value:function(){}},{key:"toggleTracking",value:function(){return this.ready?(this.device.disable_tracking=!this.device.disable_tracking,this.send(this.$iframe,"saveDevice",this.device)):this.delay("toggleTracking",arguments)}},{key:"setDeviceProperties",value:function(e){return this.ready?(i.default.extend(this.device.properties,e),this.send(this.$iframe,"saveDevice",this.device)):this.delay("setDeviceProperties",arguments)}},{key:"setSessionProperties",value:function(e){return this.ready?(i.default.extend(this.session.properties,e),this.send(this.$iframe,"saveSession",this.session)):this.delay("setSessionProperties",arguments)}},{key:"setFunnelProperties",value:function(e){return this.ready?(i.default.extend(this.funnel.properties,e),this.send(this.$iframe,"saveFunnel",this.funnel)):this.delay("setFunnelProperties",arguments)}},{key:"logEvent",value:function(e,t){if(!this.ready)return this.delay("logEvent",arguments);var n=this.getEvent(e,t);return this.send(this.$iframe,"logEvent",n)}},{key:"broadcastEvent",value:function(e,t){if(!this.ready)return this.delay("broadcastEvent",arguments);var n=this.getEvent(e,t);return this.broadcast(e,n)}},{key:"getEvent",value:function(e,t){window.document.referrer;t.referrer&&(t.referrer,delete t.referrer);var n=new Date((new Date).toUTCString()).getTime();if(f.includes(e)){var r=t?t.unique_identifier:null;r&&(this.unique_identifier=r),this.unique_identifier&&(t.unique_identifier=this.unique_identifier)}var c=null;return t&&t.funnel_id&&(c=(t=(0,o.default)(t)).funnel_id,delete t.funnel_id),{uuid:this.device.uuid,session_id:this.session.id,funnel_id:c||this.getCurrentFunnel(e),name:e,recipe_id:this.funnel.properties.recipe_id||t.recipe_id,viewport_height:(0,i.default)(window.document).height(),viewport_width:(0,i.default)(window.document).width(),language:window.navigator.language||navigator.userLanguage,encoding:window.document.characterSet||window.document.defaultCharset,url:window.document.location.href,referrer:window.document.referrer,duration:n-(window.performance?window.performance.timing.domContentLoadedEventEnd:a),client_timestamp:n,properties:i.default.extend({},this.device.properties,this.session.properties,this.funnel.properties,t||{})}}},{key:"syncCookie",value:function(e){return this.ready?(e.url=location.protocol+"//"+e.url,this.send(this.$iframe,"syncCookie",e)):this.delay("syncCookie",arguments)}},{key:"delay",value:function(e,t){var n=void 0,r=new Promise(function(e){n=e});return this.queue.push({method:e,args:t,promise:{resolve:n}}),r}},{key:"send",value:function(e,t,n){return new Promise(function(r){this.wait(e,t).then(function(e){r(e)}).catch(i.default.done),e.contentWindow.postMessage({call:t,args:n},u)}.bind(this))}},{key:"broadcast",value:function(e,t){return new Promise(function(n){window.dispatchEvent(new Event("chicory."+e,{detail:t})),n()}.bind(this))}},{key:"wait",value:function(e,t){return new Promise(function(n){window.addEventListener("message",function r(i){var o=new RegExp(u.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g");if(i.origin.match(o)&&i.source===e.contentWindow){var c=JSON.parse(i.data);c.caller===t&&(window.removeEventListener("message",r),n(c.data))}},!1)}.bind(this))}},{key:"setFunnel",value:function(e){return e&&(this.funnel.id=e,this.send(this.$iframe,"saveFunnel",this.funnel)),this.send(this.$iframe,"saveFunnel",this.funnel)}},{key:"getCurrentFunnel",value:function(e){return d.includes(e)&&this.device.last_clicked_funnel_id?this.device.last_clicked_funnel_id:this.funnel.id}}]),e}();t.default=new h},function(e,t){!function(){e.exports=this.dom}()},function(e,t,n){(function(e,n){var r=200,i="__lodash_hash_undefined__",o=9007199254740991,c="[object Arguments]",u="[object Boolean]",a="[object Date]",s="[object Function]",l="[object GeneratorFunction]",f="[object Map]",d="[object Number]",h="[object Object]",p="[object RegExp]",_="[object Set]",v="[object String]",y="[object Symbol]",g="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",m="[object Float64Array]",j="[object Int8Array]",k="[object Int16Array]",O="[object Int32Array]",E="[object Uint8Array]",P="[object Uint8ClampedArray]",x="[object Uint16Array]",$="[object Uint32Array]",A=/\w*$/,S=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,F={};F[c]=F["[object Array]"]=F[g]=F[b]=F[u]=F[a]=F[w]=F[m]=F[j]=F[k]=F[O]=F[f]=F[d]=F[h]=F[p]=F[_]=F[v]=F[y]=F[E]=F[P]=F[x]=F[$]=!0,F["[object Error]"]=F[s]=F["[object WeakMap]"]=!1;var D="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,T=D||M||Function("return this")(),q="object"==typeof t&&t&&!t.nodeType&&t,I=q&&"object"==typeof n&&n&&!n.nodeType&&n,L=I&&I.exports===q;function U(e,t){return e.set(t[0],t[1]),e}function B(e,t){return e.add(t),e}function W(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function R(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function N(e,t){return function(n){return e(t(n))}}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var G=Array.prototype,H=Function.prototype,J=Object.prototype,K=T["__core-js_shared__"],Q=function(){var e=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),X=H.toString,Y=J.hasOwnProperty,Z=J.toString,ee=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=L?T.Buffer:void 0,ne=T.Symbol,re=T.Uint8Array,ie=N(Object.getPrototypeOf,Object),oe=Object.create,ce=J.propertyIsEnumerable,ue=G.splice,ae=Object.getOwnPropertySymbols,se=te?te.isBuffer:void 0,le=N(Object.keys,Object),fe=qe(T,"DataView"),de=qe(T,"Map"),he=qe(T,"Promise"),pe=qe(T,"Set"),_e=qe(T,"WeakMap"),ve=qe(Object,"create"),ye=We(fe),ge=We(de),be=We(he),we=We(pe),me=We(_e),je=ne?ne.prototype:void 0,ke=je?je.valueOf:void 0;function Oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function xe(e){this.__data__=new Ee(e)}function $e(e,t){var n=ze(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ne(e)}(e)&&Y.call(e,"callee")&&(!ce.call(e,"callee")||Z.call(e)==c)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!Y.call(e,o)||i&&("length"==o||Ue(o,r))||n.push(o);return n}function Ae(e,t,n){var r=e[t];Y.call(e,t)&&Re(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Se(e,t){for(var n=e.length;n--;)if(Re(e[n][0],t))return n;return-1}function Ce(e,t,n,r,i,o,S){var C;if(r&&(C=o?r(e,i,o,S):r(e)),void 0!==C)return C;if(!He(e))return e;var D=ze(e);if(D){if(C=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&Y.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,C)}else{var M=Le(e),T=M==s||M==l;if(Ve(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(M==h||M==c||T&&!o){if(R(e))return o?e:{};if(C=function(e){return"function"!=typeof e.constructor||Be(e)?{}:function(e){return He(e)?oe(e):{}}(ie(e))}(T?{}:e),!t)return function(e,t){return Me(e,Ie(e),t)}(e,function(e,t){return e&&Me(t,Je(t),e)}(C,e))}else{if(!F[M])return o?e:{};C=function(e,t,n,r){var i=e.constructor;switch(t){case g:return De(e);case u:case a:return new i(+e);case b:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case w:case m:case j:case k:case O:case E:case P:case x:case $:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case f:return function(e,t,n){return W(t?n(z(e),!0):z(e),U,new e.constructor)}(e,r,n);case d:case v:return new i(e);case p:return function(e){var t=new e.constructor(e.source,A.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return function(e,t,n){return W(t?n(V(e),!0):V(e),B,new e.constructor)}(e,r,n);case y:return function(e){return ke?Object(ke.call(e)):{}}(e)}}(e,M,Ce,t)}}S||(S=new xe);var q=S.get(e);if(q)return q;if(S.set(e,C),!D)var I=n?function(e){return function(e,t,n){var r=t(e);return ze(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Je,Ie)}(e):Je(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(I||e,function(i,o){I&&(i=e[o=i]),Ae(C,o,Ce(i,t,n,r,o,e,S))}),C}function Fe(e){return!(!He(e)||function(e){return!!Q&&Q in e}(e))&&(Ge(e)||R(e)?ee:S).test(We(e))}function De(e){var t=new e.constructor(e.byteLength);return new re(t).set(new re(e)),t}function Me(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var c=t[i],u=r?r(n[c],e[c],c,n,e):void 0;Ae(n,c,void 0===u?e[c]:u)}return n}function Te(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function qe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Fe(n)?n:void 0}Oe.prototype.clear=function(){this.__data__=ve?ve(null):{}},Oe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Oe.prototype.get=function(e){var t=this.__data__;if(ve){var n=t[e];return n===i?void 0:n}return Y.call(t,e)?t[e]:void 0},Oe.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:Y.call(t,e)},Oe.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?i:t,this},Ee.prototype.clear=function(){this.__data__=[]},Ee.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0||(n==t.length-1?t.pop():ue.call(t,n,1),0))},Ee.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},Ee.prototype.has=function(e){return Se(this.__data__,e)>-1},Ee.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Pe.prototype.clear=function(){this.__data__={hash:new Oe,map:new(de||Ee),string:new Oe}},Pe.prototype.delete=function(e){return Te(this,e).delete(e)},Pe.prototype.get=function(e){return Te(this,e).get(e)},Pe.prototype.has=function(e){return Te(this,e).has(e)},Pe.prototype.set=function(e,t){return Te(this,e).set(e,t),this},xe.prototype.clear=function(){this.__data__=new Ee},xe.prototype.delete=function(e){return this.__data__.delete(e)},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ee){var i=n.__data__;if(!de||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Pe(i)}return n.set(e,t),this};var Ie=ae?N(ae,Object):function(){return[]},Le=function(e){return Z.call(e)};function Ue(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function Be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}function We(e){if(null!=e){try{return X.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Re(e,t){return e===t||e!=e&&t!=t}(fe&&Le(new fe(new ArrayBuffer(1)))!=b||de&&Le(new de)!=f||he&&"[object Promise]"!=Le(he.resolve())||pe&&Le(new pe)!=_||_e&&"[object WeakMap]"!=Le(new _e))&&(Le=function(e){var t=Z.call(e),n=t==h?e.constructor:void 0,r=n?We(n):void 0;if(r)switch(r){case ye:return b;case ge:return f;case be:return"[object Promise]";case we:return _;case me:return"[object WeakMap]"}return t});var ze=Array.isArray;function Ne(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Ge(e)}var Ve=se||function(){return!1};function Ge(e){var t=He(e)?Z.call(e):"";return t==s||t==l}function He(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Je(e){return Ne(e)?$e(e):function(e){if(!Be(e))return le(e);var t=[];for(var n in Object(e))Y.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return Ce(e,!0,!0)}}).call(t,n(3),n(4)(e))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]);
//# sourceMappingURL=analytics.1ca84651038c11fb81c2.min.js.map